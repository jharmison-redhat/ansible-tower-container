---
- name: Ensure deployment of Tower
  include_tasks: build.yml
  when: deployment_state == "present" or deployment_state == "running"
- name: Ensure Tower installation completes
  include_tasks: run.yml
  when: deployment_state == "running"
- name: Ensure absence of Tower
  include_tasks: destroy.yml
  when: deployment_state == "absent"
