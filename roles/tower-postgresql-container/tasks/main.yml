---
- name: Ensure deployment of Tower PostgreSQL
  include_tasks: build.yml
  when: deployment_state == "present" or deployment_state == "running"

- name: Start the Tower PostgreSQL container
  include_tasks: run.yml
  when: deployment_state == "running"

- name: Stop the Tower PostgreSQL container
  podman_container:
    name: '{{ tower_postgresql_container_name }}'
    state: stopped
  when: deployment_state == "stopped"

- name: Ensure absence of Tower PostgreSQL
  include_tasks: destroy.yml
  when: deployment_state == "absent"
